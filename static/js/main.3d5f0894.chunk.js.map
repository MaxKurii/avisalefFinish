{"version":3,"sources":["components/header/index.js","components/inputs.js","api/tickets.js","components/ticketsCard.js","components/main/index.js","store/index.js","pages/HomePage.js","store/reducer.js","App.js","index.js"],"names":["Header","className","src","alt","href","target","Input","withDropDown","defaultValue","value","onChange","placeholder","type","data","useState","setValue","selectedData","setSelectedData","event","filterCity","filter","item","name","toLowerCase","startsWith","required","map","city","onClick","handleOnClick","code","API_KEY","calendar","getTickets","a","from","to","when","requestData","axios","get","response","TicketCard","date","gate","depart_date","number_of_changes","destination","origin","link","Date","day","getDate","month","getMonth","getLinkAviasales","rel","toString","split","toLocaleString","year","hour","minute","Main","setData","setFrom","setTo","setDate","prices","setPrices","visible","setVisible","fetchData","useCallback","proxy","then","useEffect","handleOnSubmit","preventDefault","cityFrom","cityTo","formData","console","log","best_prices","sort","b","onSubmit","id","ticket","price","index","initialState","cityes","StoreContext","createContext","HomePage","useContext","state","dispatch","reducer","App","useReducer","Provider","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3d5f0894.chunk.js","sourcesContent":["import \"./style.scss\";\r\n\r\nfunction Header(){\r\n  return(\r\n    <header className=\"header\">\r\n      <div className=\"logo\">\r\n        <img className=\"logo_img\" src=\"./img/fly-logo-6847AA295E-seeklogo.com.png\" alt=\"logo\"/>\r\n      </div>\r\n\r\n      <div className=\"title\">\r\n        <h1>Aviasales</h1>\r\n      </div>\r\n\r\n      <nav className=\"nav\">\r\n        <div className=\"nav__item\">\r\n          <a href=\"https://translate.google.com.ua\" target=\"blanck\" alt=\"HomePage\">HomePage</a>\r\n        </div>\r\n\r\n        <div className=\"nav__item\">\r\n          <a href=\"https://translate.google.com.ua\" target=\"blanck\" alt=\"Support\">Support</a>\r\n        </div>\r\n\r\n        <div className=\"nav__item\">\r\n          <a href=\"https://translate.google.com.ua\" target=\"blanck\" alt=\"Login\">Login</a>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport{\r\n  Header\r\n}","import { useState } from \"react\";\r\n\r\nexport const Input =({withDropDown,\r\n  value:defaultValue,\r\n  onChange, \r\n  placeholder, \r\n  type='text', \r\n  data})=>{\r\n\r\n    const [value, setValue]= useState(defaultValue);\r\n    const [selectedData, setSelectedData] = useState([]);\r\n\r\n    const handleOnChange = (event)=>{\r\n\r\n      if(withDropDown){\r\n        setValue(event.target.value)\r\n        const filterCity = data.filter(item => {\r\n        const fixItem = item.name.toLowerCase(); // каждая строчка переводится к нижнему регистру\r\n        return fixItem.startsWith(event.target.value.toLowerCase());\r\n        });\r\n      \r\n        setSelectedData(filterCity);\r\n      }else{\r\n        setValue(event.target.value);\r\n        onChange(event.target.value);\r\n    }\r\n  }\r\n\r\n    const handleOnClick=(value)=>{\r\n      onChange(value);\r\n      setValue(value)\r\n      setSelectedData([]);\r\n    }\r\n    \r\n  return(\r\n    <div className=\"input\">\r\n      <label>\r\n        <span className=\"label_text\">{placeholder}</span>\r\n        <input\r\n          onChange={handleOnChange}\r\n          value={value}\r\n          type={type}\r\n          className=\"input__cities-from\" \r\n          required \r\n        />\r\n      </label>\r\n      {withDropDown && \r\n      <ul className=\"dropdown dropdown__cities-from\">\r\n        {value && selectedData.map(city=>{\r\n          return <li className='dropdown__city' key={city.code} onClick={()=> handleOnClick(city.name)}>{city.name}</li>\r\n        })}\r\n      </ul>}\r\n    </div>\r\n  )\r\n}","import axios from \"axios\";\r\n\r\nconst citiesApi = 'https://api.travelpayouts.com/data/ru/cities.json',\r\n  proxy = 'https://cors-anywhere.herokuapp.com/',\r\n  API_KEY = '889b033a2665ef3bd21fde2b8a4d1731',\r\n  calendar = 'https://min-prices.aviasales.ru/calendar_preload'\r\n\r\n  \r\n\r\nfunction getCityes(){\r\n  return axios.get(proxy + citiesApi).then(response=>{\r\n    return response.data\r\n  });\r\n}\r\n\r\nexport{\r\n  getCityes,\r\n  getTickets\r\n}\r\n\r\nasync function getTickets({from, to, when}){\r\n  const requestData =\r\n      `?currency=usd&depart_date=${when}&origin=${from.code}` +\r\n      `&destination=${to.code}&one_way=true` +\r\n      API_KEY;\r\n      try {\r\n        const response = await axios.get(calendar + requestData)\r\n        return response.data;\r\n      } catch (ex) {\r\n        return `<h3>К сожалениию на текущую дату билетов не нашлось!</h3`\r\n      }\r\n      \r\n}\r\n\r\n","const TicketCard = ({gate, from, to, value, depart_date, number_of_changes, destination, origin})=>{\r\n\r\n  const getDate = date => {\r\n    return new Date(date).toLocaleString('ru', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getLinkAviasales = () => {\r\n    let link = 'https://www.aviasales.ua/search/';\r\n  \r\n    link += origin; // link = link + data.origin\r\n  \r\n    const date = new Date(depart_date);\r\n  \r\n    const day = date.getDate();\r\n  \r\n    link += day < 10 ? '0' + day : day;\r\n  \r\n    const month = date.getMonth() + 1;\r\n  \r\n    link += month < 10 ? '0' + month : month;\r\n  \r\n    link += destination;\r\n  \r\n    link += '1';\r\n  \r\n    return link;\r\n  };\r\n  \r\n  return(\r\n    \r\n  <div>\r\n      <h3 className=\"agent\">{gate}</h3>\r\n        <div className=\"ticket__wrapper\">\r\n          <div className=\"left-side\">\r\n            <a  href={getLinkAviasales()} \r\n                target=\"_blank\" \r\n                className=\"button button__buy\"\r\n                rel=\"noreferrer\">\r\n                Купить за {value.toString().split('.')[0]}₽\r\n            </a>\r\n          </div>\r\n        <div className=\"right-side\">\r\n        <div className=\"block-left\">\r\n          <div className=\"city__from\">Вылет из города : \r\n            <span className=\"city__name\">{from}</span>\r\n          </div>\r\n        <div className=\"date\">{getDate(depart_date)}</div>\r\n        </div>\r\n\r\n        <div className=\"block-right\">\r\n          <div className=\"changes\">{number_of_changes === 0 ? 'Рейс без пересадок': `Количество пересадок: ${number_of_changes}`}</div>\r\n            <div className=\"city__to\">Город назначения:\r\n              <span className=\"city__name\">{to}</span>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  )\r\n  \r\n}\r\nexport{\r\n  TicketCard\r\n}","import \"./style.scss\";\r\nimport { Input } from \"../inputs\"; \r\nimport { getCityes, getTickets } from \"../../api/tickets\";\r\nimport { useCallback, useState, useEffect } from \"react\";\r\nimport { TicketCard } from \"../ticketsCard\";\r\n\r\n\r\nfunction Main(){\r\n  \r\n  const [data, setData]= useState([]);\r\n  const [from, setFrom] = useState('');\r\n  const [to, setTo] = useState('');\r\n  const [date , setDate] = useState('');\r\n  const [prices , setPrices] = useState([]);\r\n  const [visible, setVisible]= useState(false);\r\n\r\n\r\n  \r\n  const fetchData = useCallback(async () => {\r\n    const response = await getCityes();\r\n    setData(response);\r\n  }, [setData]);\r\n\r\n  useEffect(()=>{\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  const handleOnSubmit =async (event)=>{\r\n    event.preventDefault();\r\n\r\n    const cityFrom = data.filter((city) => city.name === from)[0];\r\n    const cityTo = data.filter((city) => city.name === to)[0];\r\n\r\n    const formData = {\r\n      from: cityFrom,\r\n      to: cityTo,\r\n      when: date,\r\n    }\r\n\r\n    const response = await getTickets(formData);\r\n    console.log(response);\r\n    if(!response.best_prices){\r\n      return \r\n    }\r\n    setPrices(response.best_prices.sort((a, b) => a.value - b.value))\r\n    \r\n    setVisible(true)\r\n  }\r\n  \r\n  return(\r\n  <main>\r\n    <section className=\"wrapper\">\r\n      <form className=\"form-search\" \r\n        onSubmit={handleOnSubmit}\r\n        >\r\n        <div className=\"wrapper__search\">\r\n          <Input \r\n            withDropDown \r\n            placeholder={`Откуда`}\r\n            data={data}\r\n            value={from}\r\n            onChange={setFrom}\r\n          />\r\n\r\n          <Input \r\n            withDropDown \r\n            placeholder={`Куда`} \r\n            data={data}\r\n            value={to}\r\n            onChange={setTo}\r\n          />\r\n\r\n          <Input\r\n            type='date' \r\n            placeholder={`Отправление`}\r\n            value={date}\r\n            onChange={setDate}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"wrapper__button\">\r\n          <button \r\n            \r\n            \r\n            type=\"submit\" \r\n            className=\"button button__search\">\r\n            <span className=\"button__search-text\">Найти билеты</span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n\r\n    <section className=\"wrapper\">\r\n      <section \r\n        className={!visible ? \"wrapper__ticket\" : \"wrapper\"}\r\n        id=\"cheapest-ticket\" >\r\n        <h2>Самые дешевые билеты на выбранную дату</h2>\r\n        {prices.filter((ticket)=> ticket.depart_date === date).map(price =>\r\n          {\r\n          return (\r\n          <TicketCard  \r\n            key={price.value}\r\n            {...price}\r\n            from={from} \r\n            to={to}\r\n            />\r\n            )\r\n          })\r\n        }    \r\n      </section>\r\n\r\n      <section \r\n        className={!visible ? \"block__ticket\" : \"wrapper\"}\r\n        id=\"other-cheap-tickets\" >\r\n        <h2>Самые дешевые билеты на другие даты</h2>\r\n        {prices.filter((ticket)=> ticket.depart_date !== date).filter((ticket, index)=> index < 10).map(price =>\r\n          {\r\n          return (\r\n          <TicketCard \r\n            key={price.value}\r\n            {...price}\r\n            from={from} \r\n            to={to}\r\n            />\r\n            )\r\n          })\r\n        }\r\n      </section>\r\n    </section>\r\n\r\n\r\n  </ main> )\r\n}\r\n\r\nexport{\r\n  Main\r\n}","import { createContext } from \"react\";\r\nconst initialState = {\r\n  cityes:[]\r\n};\r\n\r\nconst StoreContext = createContext();\r\n\r\nexport{\r\n  initialState,\r\n  StoreContext\r\n}","import {  useContext  } from 'react';\r\nimport {  StoreContext  } from \"../store\";\r\n\r\nfunction HomePage(){\r\n  const {state, dispatch}=useContext(StoreContext)\r\n  return(\r\n    <div>\r\n        {/* Hello world */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport{\r\n  HomePage\r\n}","function reducer(){\r\n\r\n};\r\n\r\nexport{\r\n  reducer\r\n}","import { useReducer } from 'react';\nimport { BrowserRouter as Router, \n  Route,\n  Redirect\n  } from \"react-router-dom\";\nimport { Header } from './components/header';\nimport { Main } from \"./components/main\";\nimport { HomePage } from './pages/HomePage';\nimport { initialState, StoreContext} from './store';\n\nimport { reducer } from \"./store/reducer\";\n\nfunction App() {\n\n  const [state, dispatch] = useReducer(reducer,initialState);\n\n  return (\n    <StoreContext.Provider value={{dispatch, state}}>\n      <Router>\n        <Header />\n        <Main />\n          <Redirect from=\"/\" to=\"dashboard\" />\n        <Route path=\"/dashboard\" component={HomePage} />\n      </Router>\n    </StoreContext.Provider>\n    \n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './assets/main.scss';\n\n\nReactDOM.render(\n  \n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}